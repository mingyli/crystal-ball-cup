(rule
 (target events.json)
 (deps %{project_root}/bin/main.exe)
 (mode promote)
 (action
  (with-stdout-to
   events.json
   (run %{project_root}/bin/main.exe 2025 json))))

(rule
 (target index.html)
 (deps index.md ../style.css)
 (mode promote)
 (action
  (run pandoc -s -t html5 --css ../style.css index.md -o index.html)))

(rule
 (target scores.json)
 (deps %{project_root}/bin/main.exe responses.csv)
 (mode promote)
 (action
  (with-stdout-to
   scores.json
   (run %{project_root}/bin/main.exe 2025 scores -responses responses.csv))))
